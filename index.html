<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#dc3545">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    
    <title>Kansai Travel Guide</title>
    
    <!-- Favicon -->
    <link rel="icon" href="icons/favicon.ico" type="image/x-icon">
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icons/icon-512x512.png">
    
    <style>
        :root {
            --bg-color: #121212;
            --text-color: #f8f9fa;
            --card-bg: #1e1e1e;
            --accent-color: #dc3545;
            --secondary-color: #6c757d;
        }
        
        .light-mode {
            --bg-color: #f8f9fa;
            --text-color: #212529;
            --card-bg: #ffffff;
            --accent-color: #dc3545;
            --secondary-color: #6c757d;
        }
        
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
            -webkit-overflow-scrolling: touch;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
            display: flex;
            flex-direction: column;
            position: fixed;
            width: 100%;
            height: 100%;
        }
        
        header {
            background-color: var(--accent-color);
            color: white;
            padding: 1rem;
            text-align: center;
            position: relative;
            flex-shrink: 0;
        }
        
        .header-content {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
        }
        
        .app-title {
            margin: 0;
            font-size: 1.8rem;
        }
        
        .app-subtitle {
            margin: 0.5rem 0 0;
            font-size: 1rem;
            font-weight: normal;
            opacity: 0.9;
        }
        
        .controls {
            position: absolute;
            top: 0.5rem;
            right: 0;
            display: flex;
            gap: 0.5rem;
        }
        
        button {
            background-color: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }
        
        button:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }
        
        main {
            padding: 1rem;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        h1, h2, h3 {
            margin-top: 0;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .card {
            background-color: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        
        .card-content {
            padding: 1rem;
        }
        
        .card h3 {
            margin-top: 0;
            color: var(--accent-color);
        }
        
        .location {
            color: var(--secondary-color);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }
        
        .detail-page {
            display: none;
            padding: 1rem;
            max-width: 800px;
            margin: 0 auto;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            height: calc(100% - 2rem);
        }
        
        .detail-page img {
            width: 100%;
            max-height: 400px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 1rem;
        }
        
        .detail-controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
        }
        
        .back-button {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .detail-language-toggle {
            background-color: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .official-link {
            display: inline-block;
            margin-top: 1rem;
            padding: 0.5rem 1rem;
            background-color: var(--accent-color);
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        
        .official-link:hover {
            opacity: 0.9;
        }
        
        .railway-map {
            margin: 2rem auto;
            max-width: 100%;
            text-align: center;
            display: none;
        }
        
        .railway-map img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            cursor: pointer;
        }
        
        .railway-map h3 {
            margin-bottom: 1rem;
            color: var(--accent-color);
        }
        
        .map-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .map-modal-content {
            max-width: 90%;
            max-height: 90%;
        }
        
        .map-modal-content img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        .close-modal {
            position: absolute;
            top: 20px;
            right: 30px;
            color: white;
            font-size: 30px;
            cursor: pointer;
        }
        
        footer {
            background-color: var(--card-bg);
            padding: 1rem;
            text-align: center;
            flex-shrink: 0;
        }
        
        footer a {
            color: var(--accent-color);
            text-decoration: none;
        }
        
        @media (max-width: 600px) {
            .grid {
                grid-template-columns: 1fr;
            }
            
            .controls {
                position: static;
                justify-content: center;
                margin: 0.5rem 0 0;
            }
            
            .app-title {
                font-size: 1.5rem;
            }
            
            .app-subtitle {
                font-size: 0.9rem;
            }
            
            .detail-controls {
                flex-direction: column;
                gap: 0.5rem;
            }
        }

   :root {
            --bg-color: #121212;
            --text-color: #f8f9fa;
            --card-bg: #1e1e1e;
            --accent-color: #dc3545;
            --secondary-color: #6c757d;
        }
        
        .light-mode {
            --bg-color: #f8f9fa;
            --text-color: #212529;
            --card-bg: #ffffff;
            --accent-color: #dc3545;
            --secondary-color: #6c757d;
        }
        
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <h1 class="app-title" id="app-title">Kansai Travel Guide</h1>
            <p class="app-subtitle" id="app-subtitle">Kyoto Osaka Nara Himeji Kobe</p>
            <div class="controls">
                <button id="theme-toggle">üåô Dark Mode</button>
                <button id="language-toggle">üá¨üáß English</button>
            </div>
        </div>
    </header>
    
    <main id="main-content">
        <div id="home-page">
            <h2 id="featured-title">Featured Destinations</h2>
            <div class="grid" id="destinations-grid">
                <!-- Cards will be inserted here by JavaScript -->
            </div>
            
            <!-- English Railway Map -->
            <div class="railway-map" id="railway-map-en">
                <h3>Kansai Railway Network Map</h3>
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQIKUC76RZB1jQNhUTgqMurX_L5H-su_URPFQVT7pJgqIcwAHZlbuC_2uU&s=10" 
                     alt="Kansai Railway Map">
            </div>
            
            <!-- Japanese Railway Map -->
            <div class="railway-map" id="railway-map-ja">
                <h3>Èñ¢Ë•øÈâÑÈÅìË∑ØÁ∑öÂõ≥</h3>
                <img src="https://dsstation.sakura.ne.jp/report/osaka/2024map/osakamap_2024_jp_LL.png" 
                     alt="Èñ¢Ë•øÈâÑÈÅìË∑ØÁ∑öÂõ≥">
            </div>
        </div>
        
        <div id="detail-page" class="detail-page">
            <div class="detail-controls">
                <button class="back-button" id="back-button">‚Üê Back</button>
                <button class="detail-language-toggle" id="detail-language-toggle">üáØüáµ Êó•Êú¨Ë™û</button>
            </div>
            <img id="detail-image" src="" alt="">
            <h2 id="detail-title"></h2>
            <div class="location" id="detail-location"></div>
            <div id="detail-description"></div>
            <h3 id="access-title">Access</h3>
            <div id="detail-access"></div>
            <h3 id="tips-title">Tips</h3>
            <div id="detail-tips"></div>
            <a id="official-link" class="official-link" href="#" target="_blank" rel="noopener">Visit Official Site</a>
        </div>
        
        <!-- Map Modal -->
        <div class="map-modal" id="map-modal">
            <span class="close-modal" id="close-modal">&times;</span>
            <div class="map-modal-content">
                <img id="modal-map-image" src="" alt="">
            </div>
        </div>
    </main>
    
    <footer>
        <a href="mailto:mementomorikatsu@gmail.com" id="contact-link">Contact me<br>mementomorikatsu@gmail.com</a>
    </footer>

    <script>
        // App data with official URLs
        const destinations = {
            en: [
                {
                    id: 'kiyomizudera',
                    title: 'Kiyomizu-dera',
                    location: 'Kyoto',
                    description: 'Iconic temple with a wooden stage jutting out from the hillside, offering spectacular views of Kyoto. Particularly beautiful during cherry blossom and autumn foliage seasons.',
                    access: 'From Kyoto Station: Take bus #100 or #206 to Kiyomizu-michi stop (10-15 min), then 10 min walk uphill.',
                    tips: 'Visit early to avoid crowds. Try the Otowa Waterfall for its three streams each granting a different wish.',
                    image: 'https://images.unsplash.com/photo-1526481280693-3bfa7568e0f3?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.kiyomizudera.or.jp/en/'
                },
                {
                    id: 'fushimiinari',
                    title: 'Fushimi Inari Taisha',
                    location: 'Kyoto',
                    description: 'Famous for its thousands of vermilion torii gates that lead up the mountain. Dedicated to Inari, the Shinto god of rice and prosperity.',
                    access: 'From Kyoto Station: Take JR Nara Line to Inari Station (5 min). The shrine is right outside the station.',
                    tips: 'Hike to the top for fewer crowds and great views. Visit at night for a mystical experience with illuminated gates.',
                    image: 'https://images.unsplash.com/photo-1492571350019-22de08371fd3?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://inari.jp/en/'
                },
                {
                    id: 'kinkakuji',
                    title: 'Kinkaku-ji',
                    location: 'Kyoto',
                    description: 'The Golden Pavilion, covered in gold leaf, reflects beautifully on the pond. A Zen temple that represents the extravagant Kitayama culture.',
                    access: 'From Kyoto Station: Take bus #101 or #205 to Kinkakuji-michi stop (40 min).',
                    tips: 'Morning light makes the gold shine brightest. The surrounding garden is equally impressive.',
                    image: 'https://images.unsplash.com/photo-1545566235-74a50f6b1d00?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.shokoku-ji.jp/en/kinkakuji/'
                },
                {
                    id: 'arashiyama',
                    title: 'Arashiyama',
                    location: 'Kyoto',
                    description: 'Famous for its bamboo grove and Togetsukyo Bridge. Offers beautiful scenery in every season - cherry blossoms, lush green, autumn colors, and snow.',
                    access: 'From Kyoto Station: Take JR Sagano Line to Saga-Arashiyama Station (15 min), then 10 min walk.',
                    tips: 'Rent a bicycle to explore the area. Visit the monkey park for great views over Kyoto.',
                    image: 'https://images.unsplash.com/photo-1523482580672-f109ba8cb9be?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.arashiyamago.com/'
                },
                {
                    id: 'gion',
                    title: 'Gion',
                    location: 'Kyoto',
                    description: 'Kyoto\'s most famous geisha district, with well-preserved machiya houses and traditional teahouses. The perfect place to experience traditional Japanese culture.',
                    access: 'From Kyoto Station: Take bus #100 or #206 to Gion stop (15 min), or Keihan Line to Gion-Shijo Station.',
                    tips: 'Evening is the best time to visit when lanterns are lit. You might spot a geiko or maiko (geisha) on their way to appointments.',
                    image: 'https://images.unsplash.com/photo-1571988840298-38dbf4f67773?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.kyoto-gion.jp/en/'
                },
                {
                    id: 'byodoin',
                    title: 'Byodo-in',
                    location: 'Uji, Kyoto',
                    description: 'The Phoenix Hall appears on the 10 yen coin. A stunning example of Heian-period architecture surrounded by a peaceful pond garden.',
                    access: 'From Kyoto Station: Take JR Nara Line to Uji Station (20 min), then 10 min walk.',
                    tips: 'The museum houses many national treasures. Matcha from Uji, one of Japan\'s best tea regions, is a must-try nearby.',
                    image: 'https://images.unsplash.com/photo-1580077873521-dc86339ef022?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.byodoin.or.jp/en/'
                },
                {
                    id: 'osakacastle',
                    title: 'Osaka Castle',
                    location: 'Osaka',
                    description: 'Iconic castle built by Toyotomi Hideyoshi, with a museum inside showcasing Osaka\'s history. The surrounding park is beautiful during cherry blossom season.',
                    access: 'From Osaka Station: Take JR Loop Line to Osakajokoen Station (10 min), then 10 min walk.',
                    tips: 'Visit the top floor for panoramic views. The night illumination is spectacular.',
                    image: 'https://images.unsplash.com/photo-1558862107-9dcbf9344ff1?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.osakacastle.net/'
                },
                {
                    id: 'dotonbori',
                    title: 'Dotonbori',
                    location: 'Osaka',
                    description: 'Osaka\'s most famous entertainment district, known for its neon lights, extravagant signage, and delicious street food like takoyaki and okonomiyaki.',
                    access: 'From Osaka Station: Take Midosuji Line to Namba Station (10 min), then 5 min walk.',
                    tips: 'Try the crab at Kani Doraku. Visit at night when the signs light up. Don\'t miss the Glico running man sign.',
                    image: 'https://images.unsplash.com/photo-1528498033370-85cb5d6a51a9?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'http://www.dotonbori.or.jp/sp/ja/'
                },
                {
                    id: 'shinsekai',
                    title: 'Shinsekai',
                    location: 'Osaka',
                    description: 'Retro-futuristic district developed in 1912 with Tsutenkaku Tower as its symbol. Famous for kushikatsu (deep-fried skewers) and nostalgic atmosphere.',
                    access: 'From Osaka Station: Take Midosuji Line to Dobutsuen-mae Station (15 min), then 5 min walk.',
                    tips: 'Try kushikatsu at one of the many restaurants (remember: no double-dipping!). Visit Spa World for an onsen experience.',
                    image: 'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.tsutenkaku.co.jp/'
                },
                {
                    id: 'narapark-todaiji',
                    title: 'Nara Park & Todai-ji',
                    location: 'Nara',
                    description: 'Vast park with over 1,000 freely roaming sacred deer, home to Todai-ji Temple with its Great Buddha housed in the world\'s largest wooden building.',
                    access: 'From Kintetsu Nara Station: 5 min walk to Nara Park, 15 min more to Todai-ji. From JR Nara Station: Take bus to Todai-ji Daibutsuden stop.',
                    tips: 'Buy deer crackers to feed the deer (they bow for food!). Don\'t miss the hole in Todai-ji\'s pillar said to bring enlightenment to those who squeeze through.',
                    image: 'https://images.unsplash.com/photo-1575425186775-b6de55b7a48a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.todaiji.or.jp/'
                },
                {
                    id: 'kasugataisha',
                    title: 'Kasuga Taisha',
                    location: 'Nara',
                    description: 'Famous for its thousands of stone and bronze lanterns donated by worshippers. The vermilion shrine buildings stand out beautifully against the forest.',
                    access: 'From Kintetsu Nara Station: 15 min walk through Nara Park. From JR Nara Station: Take bus to Kasuga Taisha Honden stop.',
                    tips: 'Visit during Lantern Festivals (early Feb and mid-Aug) when all lanterns are lit. The nearby primeval forest is a UNESCO site.',
                    image: 'https://images.unsplash.com/photo-1575425186775-b6de55b7a48a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.kasugataisha.or.jp/'
                },
                {
                    id: 'houryuji',
                    title: 'Horyu-ji',
                    location: 'Nara',
                    description: 'One of Japan\'s oldest temples, founded in 607 by Prince Shotoku. Contains the world\'s oldest surviving wooden structures and many national treasures.',
                    access: 'From JR Nara Station: Take JR Yamatoji Line to Horyuji Station (12 min), then 20 min walk or take bus.',
                    tips: 'Don\'t miss the octagonal Yumedono (Hall of Dreams). The museum houses incredible artifacts from the Asuka period.',
                    image: 'https://images.unsplash.com/photo-1580077873521-dc86339ef022?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.horyuji.or.jp/'
                },
                {
                    id: 'himejicastle',
                    title: 'Himeji Castle',
                    location: 'Hyogo',
                    description: 'Japan\'s most spectacular castle, known as the "White Heron Castle" for its elegant white appearance. A UNESCO World Heritage site with original 17th century structures.',
                    access: 'From Osaka Station: Take JR Special Rapid Service to Himeji Station (1 hour), then 15 min walk.',
                    tips: 'Visit in early April for cherry blossoms. The castle looks stunning against blue skies - check weather forecasts.',
                    image: 'https://images.unsplash.com/photo-1528164344705-47542687000d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.himejicastle.jp/en/'
                },
                {
                    id: 'kobe',
                    title: 'Kobe',
                    location: 'Hyogo',
                    description: 'Cosmopolitan port city famous for its beef, hot springs, and scenic night views from Mount Rokko. The historic Kitano district features Western-style homes from the Meiji era.',
                    access: 'From Osaka Station: Take JR Tokaido Line to Kobe Station (20 min). From Shin-Osaka: Take Shinkansen to Shin-Kobe (12 min).',
                    tips: 'Try Kobe beef at one of the many specialty restaurants. Visit the Arima Onsen hot spring area. The night view from Mount Rokko is considered one of Japan\'s three best night views.',
                    image: 'https://images.unsplash.com/photo-1571330735066-03aaa9429d89?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.feel-kobe.jp/en/'
                }
            ],
            ja: [
                {
                    id: 'kiyomizudera',
                    title: 'Ê∏ÖÊ∞¥ÂØ∫',
                    location: '‰∫¨ÈÉΩ',
                    description: 'Â¥ñ„Å´Âºµ„ÇäÂá∫„Åó„Åü„ÄåÊ∏ÖÊ∞¥„ÅÆËàûÂè∞„Äç„ÅßÁü•„Çâ„Çå„Çã‰∫¨ÈÉΩ„Çí‰ª£Ë°®„Åô„ÇãÂØ∫Èô¢„ÄÇÊò•„ÅÆÊ°ú„Å®Áßã„ÅÆÁ¥ÖËëâ„ÅåÁâπ„Å´Áæé„Åó„ÅÑ„ÄÇ',
                    access: '‰∫¨ÈÉΩÈßÖ„Åã„ÇâÔºöÂ∏Ç„Éê„Çπ100Á≥ªÁµ±„Åæ„Åü„ÅØ206Á≥ªÁµ±„Åß„ÄåÊ∏ÖÊ∞¥ÈÅì„Äç‰∏ãËªäÔºà10-15ÂàÜÔºâ„ÄÅÂæíÊ≠©10ÂàÜ„ÄÇ',
                    tips: 'Ê∑∑Èõë„ÇíÈÅø„Åë„Çã„Å™„ÇâÊó©Êúù„Åå„Åä„Åô„Åô„ÇÅ„ÄÇÈü≥ÁæΩ„ÅÆÊªù„ÅÆ‰∏âÁ≠ã„ÅÆÊ∞¥„ÅØ„Åù„Çå„Åû„ÇåÈÅï„ÅÜ„ÅîÂà©Áõä„Åå„ÅÇ„Çã„Å®Ë®Ä„Çè„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ',
                    image: 'https://images.unsplash.com/photo-1526481280693-3bfa7568e0f3?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.kiyomizudera.or.jp/'
                },
                {
                    id: 'fushimiinari',
                    title: '‰ºèË¶ãÁ®≤Ëç∑Â§ßÁ§æ',
                    location: '‰∫¨ÈÉΩ',
                    description: 'ÂçÉÊú¨È≥•Â±Ö„ÅßÊúâÂêç„Å™Á®≤Ëç∑Á•û„ÇíÁ•Ä„ÇãÁ•ûÁ§æ„ÄÇÂïÜÂ£≤ÁπÅÁõõ„ÅÆ„ÅîÂà©Áõä„Åå„ÅÇ„Çã„Å®„Åó„Å¶‰ø°‰ª∞„ÇíÈõÜ„ÇÅ„Å¶„ÅÑ„Åæ„Åô„ÄÇ',
                    access: '‰∫¨ÈÉΩÈßÖ„Åã„ÇâÔºöJRÂ•àËâØÁ∑ö„ÅßÁ®≤Ëç∑ÈßÖ‰∏ãËªäÔºà5ÂàÜÔºâ„ÄÅÈßÖÂâç„Åô„Åê„ÄÇ',
                    tips: 'Ê∑∑Èõë„ÇíÈÅø„Åë„Çã„Å™„ÇâÊó©Êúù„ÅãÂ§ïÊñπ„Åå„Åä„Åô„Åô„ÇÅ„ÄÇÂ••„ÅÆÂ±±„Åæ„ÅßÁôª„Çã„Å®‰∫¨ÈÉΩ„ÅÆË°ó„Çí‰∏ÄÊúõ„Åß„Åç„Åæ„Åô„ÄÇ',
                    image: 'https://images.unsplash.com/photo-1492571350019-22de08371fd3?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://inari.jp/'
                },
                {
                    id: 'kinkakuji',
                    title: 'ÈáëÈñ£ÂØ∫',
                    location: '‰∫¨ÈÉΩ',
                    description: 'ÈáëÁÆî„ÅßË¶Ü„Çè„Çå„ÅüËàéÂà©ÊÆø„ÅåÈè°ÊπñÊ±†„Å´Êò†„Åà„ÇãËá®Ê∏àÂÆóÁõ∏ÂõΩÂØ∫Ê¥æ„ÅÆÂØ∫Èô¢„ÄÇÂåóÂ±±ÊñáÂåñ„Çí‰ª£Ë°®„Åô„ÇãÂª∫ÁØâ„ÄÇ',
                    access: '‰∫¨ÈÉΩÈßÖ„Åã„ÇâÔºöÂ∏Ç„Éê„Çπ101Á≥ªÁµ±„Åæ„Åü„ÅØ205Á≥ªÁµ±„Åß„ÄåÈáëÈñ£ÂØ∫ÈÅì„Äç‰∏ãËªäÔºà40ÂàÜÔºâ„ÄÇ',
                    tips: 'Êô¥„Çå„ÅüÊó•„ÅÆÂçàÂâç‰∏≠„ÅåÊúÄ„ÇÇÁæé„Åó„ÅèËºù„Åç„Åæ„Åô„ÄÇÂ∫≠Âúí„ÇÇË¶ã‰∫ã„Å™„ÅÆ„Åß„ÇÜ„Å£„Åè„ÇäÊ•Ω„Åó„Åø„Åæ„Åó„Çá„ÅÜ„ÄÇ',
                    image: 'https://images.unsplash.com/photo-1545566235-74a50f6b1d00?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.shokoku-ji.jp/kinkakuji/'
                },
                {
                    id: 'arashiyama',
                    title: 'ÂµêÂ±±',
                    location: '‰∫¨ÈÉΩ',
                    description: 'Á´πÊûó„ÇÑÊ∏°ÊúàÊ©ã„ÅßÁü•„Çâ„Çå„ÇãË¶≥ÂÖâÂú∞„ÄÇÊò•„ÅÆÊ°ú„ÄÅÂ§è„ÅÆÊñ∞Á∑ë„ÄÅÁßã„ÅÆÁ¥ÖËëâ„ÄÅÂÜ¨„ÅÆÈõ™ÊôØËâ≤„Å®ÂõõÂ≠£Êäò„ÄÖ„ÅÆÈ¢®ÊôØ„ÅåÊ•Ω„Åó„ÇÅ„Çã„ÄÇ',
                    access: '‰∫¨ÈÉΩÈßÖ„Åã„ÇâÔºöJRÂµØÂ≥®ÈáéÁ∑ö„ÅßÂµØÂ≥®ÂµêÂ±±ÈßÖ‰∏ãËªäÔºà15ÂàÜÔºâ„ÄÅÂæíÊ≠©10ÂàÜ„ÄÇ',
                    tips: '„É¨„É≥„Çø„Çµ„Ç§„ÇØ„É´„ÅßÂë®Ëæ∫„ÇíÂ∑°„Çã„ÅÆ„Åå„Åä„Åô„Åô„ÇÅ„ÄÇÂµêÂ±±„É¢„É≥„Ç≠„Éº„Éë„Éº„ÇØ„Åã„Çâ„ÅØ‰∫¨ÈÉΩ„ÅÆË°ó„Çí‰∏ÄÊúõ„Åß„Åç„Åæ„Åô„ÄÇ',
                    image: 'https://images.unsplash.com/photo-1523482580672-f109ba8cb9be?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.arashiyamago.com/'
                },
                {
                    id: 'gion',
                    title: 'Á•áÂúí',
                    location: '‰∫¨ÈÉΩ',
                    description: '‰∫¨ÈÉΩ„Çí‰ª£Ë°®„Åô„ÇãËä±Ë°ó„Åß„ÄÅ‰ºùÁµ±ÁöÑ„Å™Áî∫ÂÆ∂Âª∫ÁØâ„ÅåÊÆã„Çã„Ç®„É™„Ç¢„ÄÇËàûÂ¶ì„ÇÑËä∏Â¶ì„ÅÆÂßø„ÇíË¶ã„Åã„Åë„Çã„Åì„Å®„ÇÇ„ÄÇ',
                    access: '‰∫¨ÈÉΩÈßÖ„Åã„ÇâÔºöÂ∏Ç„Éê„Çπ100Á≥ªÁµ±„Åæ„Åü„ÅØ206Á≥ªÁµ±„Åß„ÄåÁ•áÂúí„Äç‰∏ãËªäÔºà15ÂàÜÔºâ„ÄÅ„Åæ„Åü„ÅØ‰∫¨Èò™Êú¨Á∑ö„ÅßÁ•áÂúíÂõõÊù°ÈßÖ‰∏ãËªä„ÄÇ',
                    tips: 'Â§ïÊñπ„Åã„ÇâÂ§ú„Å´„Åã„Åë„Å¶„ÅåÊúÄ„ÇÇÈ¢®ÊÉÖ„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇË∑ØÂú∞Ë£è„ÇíÊï£Á≠ñ„Åô„Çã„Å®Êòî„Å™„Åå„Çâ„ÅÆ‰∫¨ÈÉΩ„ÇíÊÑü„Åò„Çâ„Çå„Åæ„Åô„ÄÇ',
                    image: 'https://images.unsplash.com/photo-1571988840298-38dbf4f67773?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.kyoto-gion.jp/'
                },
                {
                    id: 'byodoin',
                    title: 'Âπ≥Á≠âÈô¢',
                    location: '‰∫¨ÈÉΩÂ∫úÂÆáÊ≤ªÂ∏Ç',
                    description: '10ÂÜÜÁ°¨Ë≤®„ÅÆ„Éá„Ç∂„Ç§„É≥„Åß„ÇÇÁü•„Çâ„Çå„ÇãÈ≥≥Âá∞Â†Ç„ÅåÊúâÂêç„ÄÇÂπ≥ÂÆâÊôÇ‰ª£„ÅÆË≤¥ÊóèÊñáÂåñ„Çí‰ªä„Å´‰ºù„Åà„ÇãÂØ∫Èô¢„ÄÇ',
                    access: '‰∫¨ÈÉΩÈßÖ„Åã„ÇâÔºöJRÂ•àËâØÁ∑ö„ÅßÂÆáÊ≤ªÈßÖ‰∏ãËªäÔºà20ÂàÜÔºâ„ÄÅÂæíÊ≠©10ÂàÜ„ÄÇ',
                    tips: 'È≥≥ÁøîÈ§®ÂçöÁâ©È§®„Å´„ÅØÂõΩÂÆùÁ¥ö„ÅÆÊñáÂåñË≤°„ÅåÂ±ïÁ§∫„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇÂÆáÊ≤ªÊäπËå∂„ÇÇ„Åú„Å≤Âë≥„Çè„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                    image: 'https://images.unsplash.com/photo-1580077873521-dc86339ef022?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.byodoin.or.jp/'
                },
                {
                    id: 'osakacastle',
                    title: 'Â§ßÈò™Âüé',
                    location: 'Â§ßÈò™',
                    description: 'Ë±äËá£ÁßÄÂêâ„Å´„Çà„Å£„Å¶ÁØâ„Åã„Çå„ÅüÂ§ßÈò™„ÅÆ„Ç∑„É≥„Éú„É´„ÄÇÂ§©ÂÆàÈñ£„ÅØÂçöÁâ©È§®„Å´„Å™„Å£„Å¶„Åä„Çä„ÄÅÂ§ßÈò™„ÅÆÊ≠¥Âè≤„ÇíÂ≠¶„Åπ„Çã„ÄÇ',
                    access: 'Â§ßÈò™ÈßÖ„Åã„ÇâÔºöJRÂ§ßÈò™Áí∞Áä∂Á∑ö„ÅßÂ§ßÈò™ÂüéÂÖ¨ÂúíÈßÖ‰∏ãËªäÔºà10ÂàÜÔºâ„ÄÅÂæíÊ≠©10ÂàÜ„ÄÇ',
                    tips: 'Ê°ú„ÅÆÂ≠£ÁØÄ„ÅØÁâπ„Å´Áæé„Åó„ÅÑ„ÄÇÂ§úÈñì„ÅÆ„É©„Ç§„Éà„Ç¢„ÉÉ„Éó„ÇÇÂπªÊÉ≥ÁöÑ„Åß„Åô„ÄÇ',
                    image: 'https://images.unsplash.com/photo-1558862107-9dcbf9344ff1?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.osakacastle.net/'
                },
                {
                    id: 'dotonbori',
                    title: 'ÈÅìÈ†ìÂ†Ä',
                    location: 'Â§ßÈò™',
                    description: 'Â§ßÈò™„Çí‰ª£Ë°®„Åô„ÇãÁπÅËèØË°ó„ÄÇÊ¥æÊâã„Å™„Éç„Ç™„É≥ÁúãÊùø„ÇÑ„Åü„ÅìÁÑº„Åç„ÄÅ„ÅäÂ•Ω„ÅøÁÑº„Åç„Å™„Å©„ÅÆBÁ¥ö„Ç∞„É´„É°„ÅßÊúâÂêç„ÄÇ',
                    access: 'Â§ßÈò™ÈßÖ„Åã„ÇâÔºöÂæ°Â†ÇÁ≠ãÁ∑ö„ÅßÈõ£Ê≥¢ÈßÖ‰∏ãËªäÔºà10ÂàÜÔºâ„ÄÅÂæíÊ≠©5ÂàÜ„ÄÇ',
                    tips: '„Åã„Å´ÈÅìÊ•Ω„ÅÆÂãï„Åè„Ç´„ÉãÁúãÊùø„ÇÑ„Ç∞„É™„Ç≥„ÅÆ„É©„É≥„Éã„É≥„Ç∞„Éû„É≥ÁúãÊùø„ÅØË®òÂøµÊíÆÂΩ±„Çπ„Éù„ÉÉ„Éà„ÄÇÂ§ú„ÅÆ„Éç„Ç™„É≥„Åå„Åä„Åô„Åô„ÇÅ„ÄÇ',
                    image: 'https://images.unsplash.com/photo-1528498033370-85cb5d6a51a9?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'http://www.dotonbori.or.jp/'
                },
                {
                    id: 'shinsekai',
                    title: 'Êñ∞‰∏ñÁïå',
                    location: 'Â§ßÈò™',
                    description: '1912Âπ¥„Å´ÈñãÁô∫„Åï„Çå„Åü„É¨„Éà„É≠„Å™„Ç®„É™„Ç¢„ÄÇÈÄöÂ§©Èñ£„Åå„Ç∑„É≥„Éú„É´„Åß„ÄÅ‰∏≤„Ç´„ÉÑ„ÅåÂêçÁâ©„ÄÇ',
                    access: 'Â§ßÈò™ÈßÖ„Åã„ÇâÔºöÂæ°Â†ÇÁ≠ãÁ∑ö„ÅßÂãïÁâ©ÂúíÂâçÈßÖ‰∏ãËªäÔºà15ÂàÜÔºâ„ÄÅÂæíÊ≠©5ÂàÜ„ÄÇ',
                    tips: '‰∏≤„Ç´„ÉÑ„ÅØ„Äå‰∫åÂ∫¶Êº¨„ÅëÁ¶ÅÊ≠¢„Äç„Åå„Éû„Éä„Éº„ÄÇ„Çπ„Éë„ÉØ„Éº„É´„Éâ„ÅßÊ∏©Ê≥â„ÇíÊ•Ω„Åó„ÇÄ„ÅÆ„ÇÇ„Åä„Åô„Åô„ÇÅ„ÄÇ',
                    image: 'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.tsutenkaku.co.jp/'
                },
                {
                    id: 'narapark-todaiji',
                    title: 'Â•àËâØÂÖ¨Âúí„ÉªÊù±Â§ßÂØ∫',
                    location: 'Â•àËâØ',
                    description: '1,000È†≠‰ª•‰∏ä„ÅÆÈπø„ÅåËá™Áî±„Å´ÊöÆ„Çâ„ÅôÂ∫ÉÂ§ß„Å™ÂÖ¨Âúí„ÄÇ‰∏ñÁïåÊúÄÂ§ß„ÅÆÊú®ÈÄ†Âª∫ÁØâ„ÉªÊù±Â§ßÂØ∫Â§ß‰ªèÊÆø„Åå„ÅÇ„Çã„ÄÇ',
                    access: 'ËøëÈâÑÂ•àËâØÈßÖ„Åã„ÇâÔºöÂæíÊ≠©5ÂàÜ„ÅßÂ•àËâØÂÖ¨Âúí„ÄÅ„Åï„Çâ„Å´15ÂàÜ„ÅßÊù±Â§ßÂØ∫„ÄÇJRÂ•àËâØÈßÖ„Åã„ÇâÔºö„Éê„Çπ„Åß„ÄåÊù±Â§ßÂØ∫Â§ß‰ªèÊÆø„Äç‰∏ãËªä„ÄÇ',
                    tips: 'Èπø„Åõ„Çì„Åπ„ÅÑ„ÇíË≤∑„Å£„Å¶Èπø„Å´„ÅÇ„Åí„Çà„ÅÜÔºàÈπø„ÅØ„Åä„Åò„Åé„Çí„Åó„Åæ„ÅôÔºÅÔºâ„ÄÇÂ§ß‰ªèÊÆø„ÅÆÊü±„ÅÆÁ©¥„Åè„Åê„Çä„ÇÇ„ÅäÂøò„Çå„Å™„Åè„ÄÇ',
                    image: 'https://images.unsplash.com/photo-1575425186775-b6de55b7a48a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.todaiji.or.jp/'
                },
                {
                    id: 'kasugataisha',
                    title: 'Êò•Êó•Â§ßÁ§æ',
                    location: 'Â•àËâØ',
                    description: 'Êï∞ÂçÉÂü∫„ÅÆÁü≥ÁÅØÁ±†„Å®Èá£ÁÅØÁ±†„Åå‰∏¶„Å∂Êú±Â°ó„Çä„ÅÆÁ•ûÁ§æ„ÄÇËÉåÂæå„Å´Â∫É„Åå„ÇãÊò•Êó•Â±±ÂéüÂßãÊûó„ÅØ‰∏ñÁïåÈÅ∫Áî£„ÄÇ',
                    access: 'ËøëÈâÑÂ•àËâØÈßÖ„Åã„ÇâÔºöÂ•àËâØÂÖ¨Âúí„ÇíÈÄö„Å£„Å¶ÂæíÊ≠©15ÂàÜ„ÄÇJRÂ•àËâØÈßÖ„Åã„ÇâÔºö„Éê„Çπ„Åß„ÄåÊò•Êó•Â§ßÁ§æÊú¨ÊÆø„Äç‰∏ãËªä„ÄÇ',
                    tips: '2Êúà„ÅÆÁØÄÂàÜ„Å®8Êúà„ÅÆ‰∏áÁÅØÁ±†„Åß„ÅØÂÖ®„Å¶„ÅÆÁÅØÁ±†„Å´ÁÅ´„ÅåÁÅØ„Åï„Çå„Åæ„Åô„ÄÇÂéüÂßãÊûó„ÅÆÊï£Á≠ñ„ÇÇ„Åä„Åô„Åô„ÇÅ„ÄÇ',
                    image: 'https://images.unsplash.com/photo-1575425186775-b6de55b7a48a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.kasugataisha.or.jp/'
                },
                {
                    id: 'houryuji',
                    title: 'Ê≥ïÈöÜÂØ∫',
                    location: 'Â•àËâØ',
                    description: 'ËÅñÂæ≥Â§™Â≠ê„ÅåÂª∫Á´ã„Åó„Åü‰∏ñÁïåÊúÄÂè§„ÅÆÊú®ÈÄ†Âª∫ÁØâÁæ§„Åå„ÅÇ„ÇãÂØ∫Èô¢„ÄÇÊï∞Â§ö„Åè„ÅÆÂõΩÂÆù„ÇíÊâÄËîµ„ÄÇ',
                    access: 'JRÂ•àËâØÈßÖ„Åã„ÇâÔºöJRÂ§ßÂíåË∑ØÁ∑ö„ÅßÊ≥ïÈöÜÂØ∫ÈßÖ‰∏ãËªäÔºà12ÂàÜÔºâ„ÄÅÂæíÊ≠©20ÂàÜ„Åæ„Åü„ÅØ„Éê„ÇπÂà©Áî®„ÄÇ',
                    tips: 'ÂÖ´ËßíÂΩ¢„ÅÆÂ§¢ÊÆø„ÅØÂøÖË¶ã„ÄÇÂ§ßÂÆùËîµÈô¢„Å´„ÅØÈ£õÈ≥•ÊôÇ‰ª£„ÅÆË≤¥Èáç„Å™ÊñáÂåñË≤°„ÅåÂ±ïÁ§∫„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ',
                    image: 'https://images.unsplash.com/photo-1580077873521-dc86339ef022?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.horyuji.or.jp/'
                },
                {
                    id: 'himejicastle',
                    title: 'Âß´Ë∑ØÂüé',
                    location: 'ÂÖµÂ∫´ÁúåÂß´Ë∑ØÂ∏Ç',
                    description: 'ÁôΩÈ∑∫Âüé„ÅÆÊÑõÁß∞„ÅßË¶™„Åó„Åæ„Çå„ÇãÊó•Êú¨„ÅßÊúÄ„ÇÇÁæé„Åó„ÅÑÂüé„ÄÇ17‰∏ñÁ¥Ä„ÅÆÂª∫ÈÄ†ÂΩìÊôÇ„ÅÆÂßø„ÇíÊÆã„ÅôÂõΩÂÆù„Åß‰∏ñÁïåÈÅ∫Áî£„ÄÇ',
                    access: 'Â§ßÈò™ÈßÖ„Åã„ÇâÔºöJRÁ•ûÊà∏Á∑öÊñ∞Âø´ÈÄü„ÅßÂß´Ë∑ØÈßÖ‰∏ãËªäÔºà1ÊôÇÈñìÔºâ„ÄÅÂæíÊ≠©15ÂàÜ„ÄÇ',
                    tips: 'Ê°ú„ÅÆÂ≠£ÁØÄÔºà4Êúà‰∏äÊó¨Ôºâ„ÅåÁâπ„Å´„Åä„Åô„Åô„ÇÅ„ÄÇÈùíÁ©∫„ÇíËÉåÊôØ„Å´„Åó„ÅüÁôΩ‰∫ú„ÅÆÂüé„ÅØÂúßÂ∑ª„Åß„Åô„ÄÇ',
                    image: 'https://images.unsplash.com/photo-1528164344705-47542687000d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.himejicastle.jp/'
                },
                {
                    id: 'kobe',
                    title: 'Á•ûÊà∏',
                    location: 'ÂÖµÂ∫´Áúå',
                    description: 'Ê∏ØÁî∫„Å™„Çâ„Åß„ÅØ„ÅÆÁï∞ÂõΩÊÉÖÁ∑í„Å®Á•ûÊà∏Áâõ„ÅßÊúâÂêç„ÄÇÂÖ≠Áî≤Â±±„Åã„Çâ„ÅÆÂ§úÊôØ„ÅØÊó•Êú¨‰∏âÂ§ßÂ§úÊôØ„ÅÆ‰∏Ä„Å§„ÄÇ',
                    access: 'Â§ßÈò™ÈßÖ„Åã„ÇâÔºöJRÁ•ûÊà∏Á∑ö„ÅßÁ•ûÊà∏ÈßÖ‰∏ãËªäÔºà20ÂàÜÔºâ„ÄÇÊñ∞Â§ßÈò™„Åã„ÇâÔºöÊñ∞ÂππÁ∑ö„ÅßÊñ∞Á•ûÊà∏‰∏ãËªäÔºà12ÂàÜÔºâ„ÄÇ',
                    tips: 'Á•ûÊà∏Áâõ„ÅÆ„Çπ„ÉÜ„Éº„Ç≠„ÅØÁµ∂ÂìÅ„ÄÇÊúâÈ¶¨Ê∏©Ê≥â„ÇÑÂÖ≠Áî≤Â±±„ÅÆÂ§úÊôØ„ÇÇ„ÅäÂøò„Çå„Å™„Åè„ÄÇ',
                    image: 'https://images.unsplash.com/photo-1571330735066-03aaa9429d89?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80',
                    officialUrl: 'https://www.feel-kobe.jp/'
                }
            ]
        };

        // App state
        let currentLanguage = 'en';
        let darkMode = true;
        let currentPage = 'home';
        let currentDestinationId = null;

        // DOM elements
        const homePage = document.getElementById('home-page');
        const detailPage = document.getElementById('detail-page');
        const backButton = document.getElementById('back-button');
        const themeToggle = document.getElementById('theme-toggle');
        const languageToggle = document.getElementById('language-toggle');
        const detailLanguageToggle = document.getElementById('detail-language-toggle');
        const destinationsGrid = document.getElementById('destinations-grid');
        const appTitle = document.getElementById('app-title');
        const appSubtitle = document.getElementById('app-subtitle');
        const featuredTitle = document.getElementById('featured-title');
        const detailTitle = document.getElementById('detail-title');
        const detailLocation = document.getElementById('detail-location');
        const detailDescription = document.getElementById('detail-description');
        const detailImage = document.getElementById('detail-image');
        const detailAccess = document.getElementById('detail-access');
        const detailTips = document.getElementById('detail-tips');
        const officialLink = document.getElementById('official-link');
        const accessTitle = document.getElementById('access-title');
        const tipsTitle = document.getElementById('tips-title');
        const contactLink = document.getElementById('contact-link');
        const railwayMapEn = document.getElementById('railway-map-en');
        const railwayMapJa = document.getElementById('railway-map-ja');
        const mapModal = document.getElementById('map-modal');
        const closeModal = document.getElementById('close-modal');
        const modalMapImage = document.getElementById('modal-map-image');

        // Initialize the app
        function init() {
            renderDestinations();
            setupEventListeners();
            updateUI();
            
            // Hide address bar in mobile browsers
            window.addEventListener('load', function() {
                setTimeout(function() {
                    window.scrollTo(0, 1);
                }, 0);
            });
            
            // Prevent scrolling when modal is open
            document.addEventListener('touchmove', function(e) {
                if (mapModal.style.display === 'flex') {
                    e.preventDefault();
                }
            }, { passive: false });
        }

        // Set up event listeners
        function setupEventListeners() {
            themeToggle.addEventListener('click', toggleTheme);
            languageToggle.addEventListener('click', toggleLanguage);
            detailLanguageToggle.addEventListener('click', toggleDetailLanguage);
            backButton.addEventListener('click', goBack);
            
            // Railway map click handlers
            document.querySelectorAll('.railway-map img').forEach(img => {
                img.addEventListener('click', openMapModal);
            });
            
            // Modal close handler
            closeModal.addEventListener('click', closeMapModal);
            mapModal.addEventListener('click', (e) => {
                if (e.target === mapModal) closeMapModal();
            });
        }

        // Render destination cards
        function renderDestinations() {
            destinationsGrid.innerHTML = '';
            destinations[currentLanguage].forEach(destination => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <img src="${destination.image}" alt="${destination.title}">
                    <div class="card-content">
                        <h3>${destination.title}</h3>
                        <div class="location">${destination.location}</div>
                    </div>
                `;
                card.addEventListener('click', () => showDetail(destination.id));
                destinationsGrid.appendChild(card);
            });
        }

        // Show detail page for a destination
        function showDetail(id) {
            currentDestinationId = id;
            updateDetailContent();
            currentPage = 'detail';
            updateUI();
            window.scrollTo(0, 0);
        }

        // Update detail content based on current language
        function updateDetailContent() {
            const destination = destinations[currentLanguage].find(d => d.id === currentDestinationId);
            if (!destination) return;
            
            detailTitle.textContent = destination.title;
            detailLocation.textContent = destination.location;
            detailDescription.textContent = destination.description;
            detailImage.src = destination.image;
            detailImage.alt = destination.title;
            detailAccess.textContent = destination.access;
            detailTips.textContent = destination.tips;
            officialLink.href = destination.officialUrl;
            
            // Update link text based on language
            officialLink.textContent = currentLanguage === 'en' ? 'Visit Official Site' : 'ÂÖ¨Âºè„Çµ„Ç§„Éà„Å∏';
        }

        // Go back to home page
        function goBack() {
            currentPage = 'home';
            updateUI();
            window.scrollTo(0, 0);
        }

        // Toggle between dark and light mode
        function toggleTheme() {
            darkMode = !darkMode;
            updateUI();
        }

        // Toggle between English and Japanese on home page
        function toggleLanguage() {
            currentLanguage = currentLanguage === 'en' ? 'ja' : 'en';
            renderDestinations();
            updateUI();
        }

        // Toggle between English and Japanese on detail page
        function toggleDetailLanguage() {
            currentLanguage = currentLanguage === 'en' ? 'ja' : 'en';
            updateDetailContent();
            updateUI();
        }

        // Open map modal with clicked image
        function openMapModal(e) {
            modalMapImage.src = e.target.src;
            modalMapImage.alt = e.target.alt;
            mapModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        // Close map modal
        function closeMapModal() {
            mapModal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Update UI based on current state
        function updateUI() {
            // Set theme
            if (darkMode) {
                document.body.classList.remove('light-mode');
                themeToggle.textContent = currentLanguage === 'en' ? 'üåô Dark Mode' : 'üåô „ÉÄ„Éº„ÇØ„É¢„Éº„Éâ';
                detailLanguageToggle.style.backgroundColor = 'rgba(255, 255, 255, 0.2)';
            } else {
                document.body.classList.add('light-mode');
                themeToggle.textContent = currentLanguage === 'en' ? '‚òÄÔ∏è Light Mode' : '‚òÄÔ∏è „É©„Ç§„Éà„É¢„Éº„Éâ';
                detailLanguageToggle.style.backgroundColor = 'rgba(0, 0, 0, 0.1)';
            }
            
            // Set language toggle text
            languageToggle.textContent = currentLanguage === 'en' ? 'üáØüáµ Êó•Êú¨Ë™û' : 'üá¨üáß English';
            detailLanguageToggle.textContent = currentLanguage === 'en' ? 'üáØüáµ Êó•Êú¨Ë™û' : 'üá¨üáß English';
            
            // Update page visibility
            homePage.style.display = currentPage === 'home' ? 'block' : 'none';
            detailPage.style.display = currentPage === 'detail' ? 'block' : 'none';
            
            // Update railway map visibility
            if (currentPage === 'home') {
                railwayMapEn.style.display = currentLanguage === 'en' ? 'block' : 'none';
                railwayMapJa.style.display = currentLanguage === 'ja' ? 'block' : 'none';
            } else {
                railwayMapEn.style.display = 'none';
                railwayMapJa.style.display = 'none';
            }
            
            // Update text content based on language
            if (currentLanguage === 'en') {
                appTitle.textContent = 'Kansai Travel Guide';
                appSubtitle.textContent = 'Kyoto Osaka Nara Himeji Kobe';
                featuredTitle.textContent = 'Featured Destinations';
                accessTitle.textContent = 'Access';
                tipsTitle.textContent = 'Tips';
                backButton.textContent = '‚Üê Back';
                contactLink.innerHTML = 'Contact me<br>mementomorikatsu@gmail.com';
            } else {
                appTitle.textContent = 'Èñ¢Ë•øÊóÖË°å„Ç¨„Ç§„Éâ';
                appSubtitle.textContent = '‰∫¨ÈÉΩ Â§ßÈò™ Â•àËâØ Âß´Ë∑Ø Á•ûÊà∏';
                featuredTitle.textContent = '„Åä„Åô„Åô„ÇÅË¶≥ÂÖâÂú∞';
                accessTitle.textContent = '„Ç¢„ÇØ„Çª„Çπ';
                tipsTitle.textContent = '„Åä„Åô„Åô„ÇÅÊÉÖÂ†±';
                backButton.textContent = '‚Üê Êàª„Çã';
                contactLink.innerHTML = 'ÈÄ£Áµ°ÂÖà<br>mementomorikatsu@gmail.com';
            }
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // Register service worker with scope from current directory
                navigator.serviceWorker.register('./sw.js', { scope: './' })
                    .then(registration => {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }

    // Êó¢Â≠ò„ÅÆJavaScript„Ç≥„Éº„Éâ„ÅØÂ§âÊõ¥„Å™„Åó
        const destinations = { /* ... */ };
        // ...
        document.addEventListener('DOMContentLoaded', init);
        
        // ===== ‰ª•‰∏ã„Å´PWAÈñ¢ÈÄ£„ÅÆ„Ç≥„Éº„Éâ„ÇíËøΩÂä† =====
        
        // „Ç§„É≥„Çπ„Éà„Éº„É´„Éú„Çø„É≥„ÅÆ‰ΩúÊàê„Å®Ë°®Á§∫
        let deferredPrompt;
        const installButton = document.createElement('button');
        installButton.id = 'install-button';
        installButton.textContent = 'üì± Install App';
        installButton.style.cssText = `
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 10px 15px;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            z-index: 1000;
            display: none;
        `;
        document.body.appendChild(installButton);
        
        // „Ç§„É≥„Çπ„Éà„Éº„É´ÂèØËÉΩÊôÇ„ÅÆ„Ç§„Éô„É≥„Éà
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installButton.style.display = 'block';
            
            installButton.addEventListener('click', () => {
                installButton.style.display = 'none';
                deferredPrompt.prompt();
                
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('User accepted install');
                    }
                    deferredPrompt = null;
                });
            });
        });
        
        // Service Worker„ÅÆÁôªÈå≤
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registered:', registration);
                    })
                    .catch(error => {
                        console.log('ServiceWorker registration failed:', error);
                    });
            });
        }
        
        // „Ç§„É≥„Çπ„Éà„Éº„É´Ê∏à„Åø„Åã„Å©„ÅÜ„Åã„ÇíÁ¢∫Ë™ç
        window.addEventListener('appinstalled', () => {
            console.log('App installed successfully');
            installButton.style.display = 'none';
            deferredPrompt = null;
        });
        
        // „Ç™„Éï„É©„Ç§„É≥Áä∂ÊÖã„ÅÆÊ§úÂá∫
        window.addEventListener('online', () => {
            document.documentElement.style.setProperty('--accent-color', '#dc3545');
        });
        
        window.addEventListener('offline', () => {
            document.documentElement.style.setProperty('--accent-color', '#6c757d');
            showOfflineAlert();
        });
        
        function showOfflineAlert() {
            if (currentPage === 'home') {
                const alert = document.createElement('div');
                alert.textContent = '‚ö†Ô∏è You are offline. Some features may be limited.';
                alert.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    padding: 10px;
                    background-color: #ffc107;
                    color: #212529;
                    text-align: center;
                    z-index: 2000;
                `;
                document.body.appendChild(alert);
                
                setTimeout(() => {
                    document.body.removeChild(alert);
                }, 5000);
            }
        }
        
    </script>
</body>
</html>
